---
# multilingual page pair id, this must pair with translations of this page. (This name must be unique)
# lng_pair: id_autogeneratedsamplecontent_1
title: CSRF 토큰 비활성화

# post specific
# if not specified, .name will be used from _data/owner.yml
#author: "Dante"
# multiple category is not supported
category: auto generated
# multiple tag entries are possible`
tags: [Database, DB]
# thumbnail image for post
img: ":CSRFToken.jpg"
# disable comments on this page
comments_disable: true

# publish date
date: 2022-08-12 23:35:00 +0900

# seo
# if not specified, date will be used.
#meta_modify_date: 2022-08-12 23:35:00 +0900
# check the meta_common_description in _data/lang/[language].yml
#meta_description: ""

# optional
# if you enabled image_viewer_posts you don't need to enable this. This is only if image_viewer_posts = false
#image_viewer_on: true
# if you enabled image_lazy_loader_posts you don't need to enable this. This is only if image_lazy_loader_posts = false
#image_lazy_loader_on: true
# exclude from on site search
#on_site_search_exclude: true
# exclude from search engines
#search_engine_exclude: true
# to disable this page, simply set published: false or delete this file
#published: false
---
{%- comment -%} Please delete below and place your page content here {%- endcomment -%}

{%- include util/auto-content-generator.liquid -%}

<!-- outline-start -->
데이터들을 받는다.  Security는 서버를 감싸고 있으며, 데이터들을 서버에 들어가기 전 검사를 한다.

그 검사 이름이 CSRF 토큰 검사를 한다.

![Untitled 2](https://user-images.githubusercontent.com/56623911/184473876-ac5d14b2-b87b-4862-ae83-d0f274146c95.png)

요청(회원가입페이지)을 보내고 서버에서 응답할 때 signup.jsp 파일에다가 CSRF 토큰을 심어서 클라이언트에게 돌려준다.

페이지를 받을 때 input tag에 임시의 난수 값이 생겨서 보내진다.

예시)CSRF 토큰이 달려서 돌아올 때 이런식으로 돌아온다. → `csrf="난수"`

```java
<input type="text" name="username" placeholder="유저네임" required="required" csrf="난수"/>
```

- 클라이언트가 CSRF 토큰을 넣어서 보낸다면 ?

```java
<input type="text" name="username" placeholder="유저네임" required="required" csrf="난수" />
<input type="password" name="password" placeholder="패스워드" required="required" csrf="난수" />
<input type="email" name="email" placeholder="이메일" required="required" csrf="난수" />
<input type="text" name="name" placeholder="이름" required="required" csrf="난수" />
```

![Untitled 3](https://user-images.githubusercontent.com/56623911/184473877-6cf1f296-30bd-41ac-be07-b88ccbcd1a36.png)

Security가 CSRF 토큰이 있는지 확인한다

postman 같은 것으로 접근 사용자 인지?  홈페이지로 접근하는 사용자인지? 구분하기위해서 CSRF 토큰!

- postman으로 접근 사용자인지 ? (불법적인 매크로 ?  사용자인지? )

똑같이 403 에러뜬다! CSRF가 막고있다.

![Untitled 4](https://user-images.githubusercontent.com/56623911/184473894-5c63051d-27ac-40f9-8102-583128bb1faf.png)

![Untitled 5](https://user-images.githubusercontent.com/56623911/184473895-a15ee54a-ccd2-489a-aac6-888a6a200112.png)

### CSRF 토큰 비활성화

- *`http*.csrf().disable();` 을 configure 안에 넣어준다. 그러면 CSRF 토큰은 비활성화 된다.

```java
├─📁COME.COS.photogram
   │
   ├─📁config
       │
       │─ 📦 SecurityConfig.java
```

```java
@Override
protected void configure(HttpSecurity http) throws Exception {
			*http*.csrf().disable();
}
```


<!-- outline-end -->
