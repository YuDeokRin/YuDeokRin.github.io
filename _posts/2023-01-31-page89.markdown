---
# multilingual page pair id, this must pair with translations of this page. (This name must be unique)
# lng_pair: id_autogeneratedsamplecontent_1
title: Item32. ì œë„¤ë¦­ê³¼ ê°€ë³€ì¸ìˆ˜ë¥¼ í•¨ê»˜ ì“¸ ë•ŒëŠ” ì‹ ì¤‘í•˜ë¼.

# post specific
# if not specified, .name will be used from _data/owner.yml
#author: "Dante"
# multiple category is not supported
category: auto generated
# multiple tag entries are possible
tags: [Effective_Java, Java]
# thumbnail image for post
img: ":Eff3.jpg"
# disable comments on this page
comments_disable: true

# publish date
date: 2023-01-31 01:12:00 +0900

# seo
# if not specified, date will be used.
#meta_modify_date: 2023-01-31 01:12:00 +0900
# check the meta_common_description in _data/lang/[language].yml
#meta_description: ""

# optional
# if you enabled image_viewer_posts you don't need to enable this. This is only if image_viewer_posts = false
#image_viewer_on: true
# if you enabled image_lazy_loader_posts you don't need to enable this. This is only if image_lazy_loader_posts = false
#image_lazy_loader_on: true
# exclude from on site search
#on_site_search_exclude: true
# exclude from search engines
#search_engine_exclude: true
# to disable this page, simply set published: false or delete this file
#published: false
---
{%- comment -%} Please delete below and place your page content here {%- endcomment -%}

{%- include util/auto-content-generator.liquid -%}

<!-- outline-start -->

# item 32. ì œë„¤ë¦­ê³¼ ê°€ë³€ì¸ìˆ˜ë¥¼ í•¨ê»˜ ì“¸ ë•ŒëŠ” ì‹ ì¤‘í•˜ë¼.

- í•µì‹¬ ì •ë¦¬
  - ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë°°ì—´ì— ê°’ì„ ì €ì¥í•˜ëŠ” ê²ƒì€ ì•ˆì „í•˜ì§€ ì•Šë‹¤.
    - í™ ì˜¤ì—¼ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.(ì»´íŒŒì¼ ê²½ê³  ë°œìƒ)
    - Java 7ì— ì¶”ê°€ëœ `@SafeVarargs` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

  - ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë°°ì—´ì˜ ì°¸ì¡°ë¥¼ ë°–ìœ¼ë¡œ ë…¸ì¶œí•˜ë©´ í™ ì˜¤ì—¼ì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
    - ì˜ˆì™¸ì ìœ¼ë¡œ, `@SafeVarages`ë¥¼ ì‚¬ìš©í•œ ë©”ì„œë“œì— ë„˜ê¸°ëŠ” ê²ƒì€ ì•ˆì „í•˜ë‹¤.
    - ì˜ˆì™¸ì ìœ¼ë¡œ, ë°°ì—´ì˜ ì¼ë¶€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì¼ë°˜ ë©”ì„œë“œë¡œ ë„˜ê¸°ëŠ” ê²ƒì€ ì•ˆì „í•˜ë‹¤.

  - ì•„ì´í…œ 28ì˜ ì¡°ì–¸ì— ë”°ë¼ ê°€ë³€ì¸ìˆ˜ë¥¼ Listë¥¼ ë°”ê¾¼ë‹¤ë©´
    - ë°°ì—´ì—†ì´ ì œë„¤ë¦­ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì… ì•ˆì •ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.
    - `@SafeVarages` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤.
    - ì‹¤ìˆ˜ë¡œ ì•ˆì „í•˜ë‹¤ê³  íŒë‹¨í•  ê±±ì •ë„ ì—†ë‹¤.

---

## âš“ï¸ì„œë¡ 

ê°€ë³€ì¸ìˆ˜(varargs) ë©”ì„œë“œì™€ ì œë„¤ë¦­ì€ ìë°” 5ë•Œ í•¨ê»˜ ì¶”ê°€ë˜ì—ˆë‹¤.

ì„œë¡œ ì˜ ì–´ìš¸ë¦¬ê² ì§€? ë¼ëŠ” ê¸°ëŒ€ëŠ” ì‚°ì‚°íˆ ì¡°ê°ë‚œë‹¤.

ê°€ë³€ ì¸ìˆ˜ëŠ” ë©”ì„œë“œì— ë„˜ê¸°ëŠ” ì¸ìˆ˜ì˜ ê°œìˆ˜ë¥¼ í´ë¼ì´ì–¸íŠ¸ê°€ ì¡°ì ˆí•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ”ë°, êµ¬í˜„ ë°©ì‹ì— í—ˆì ì´ ìˆë‹¤.

í—ˆì ì€ ê°€ë³€ì¸ìˆ˜ë¥¼ ë©”ì„œë“œë¡œ í˜¸ì¶œí•˜ë©´ ê°€ë³€ì¸ìˆ˜ë¥¼ ë‹´ê¸° ìœ„í•œ ë°°ì—´ì´ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤.

ê·¸ ê²°ê³¼ varagrs ë§¤ê°œë³€ìˆ˜ì— ì œë„¤ë¦­ì´ë‚˜ ë§¤ê°œ ë³€ìˆ˜í™” íƒ€ì…ì´ í¬í•¨ë˜ë©´ ì•Œê¸° ì–´ë ¤ìš´ ì»´íŒŒì¼ ê²½ê³ ê°€ ë°œìƒí•œë‹¤.

ì´ì œ ìì„¸íˆ ì•Œì•„ë³´ì.

---

## âœ…ì œë„¤ë¦­ê³¼ varargsë¥¼ í˜¼ìš©í•˜ë©´ íƒ€ì… ì•ˆì „ì„±ì´ ê¹¨ì§„ë‹¤.

```java
public class Dangerous {
    static void dangerous(List<String>... stringLists){ //1

        List<Integer> intList = List.of(42); // 2
        Object[] objects = stringLists; // 3
        objects[0] = intList; // 4
        String s = stringLists[0].get(0);  // 5
    }

    public static void main(String[] args) {
        dangerous(List.of("There be drangous!")); // 6
    }

}
```

- ë§¤ê°œë³€ìˆ˜í™” íƒ€ì…(List<String>â€¦ )ì˜ ë³€ìˆ˜ê°€ íƒ€ì…ì´ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ë©´ í™ ì˜¤ì—¼ì´ ë°œìƒí•œë‹¤.

![Untitled](https://user-images.githubusercontent.com/56623911/215532181-18723827-e243-4614-87f5-bb1f03953206.png)

### ğŸ”¡ì½”ë“œë¥¼ ëœ¯ì–´ ë³´ë©´

1. ì œë„¤ë¦­ì— varargs ë°°ì—´ ë§¤ê°œ ë³€ìˆ˜ì— ê°’ì„ ì €ì¥í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
2. Integeríƒ€ì… ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê³  ê°’(42)ë¥¼ ë„£ì–´ì¤¬ë‹¤.
3. stringLists(List<String> ë°°ì—´)ë¥¼ Object[ ]ì— í• ë‹¹í•´ì¤€ë‹¤. ì´ìœ ëŠ” ë°°ì—´ì„ ê³µë³€ì´ê¸° ë•Œë¬¸ì— ê°€ëŠ¥ , ì¦‰ String íƒ€ì…ì„ Object íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ëœ»
4. intListë¥¼  ë¦¬ìŠ¤íŠ¸ ë°°ì—´ì¸ Object[0]ì— ë„£ì–´ì¤€ë‹¤.
5. stringLists[0].get(0) í•´ì„œ String sì— ë„£ì–´ì¤€ë‹¤.  ë”°ë¼ì„œ *`ClassCastException` ì´ ë°œìƒí•œë‹¤.*

![Untitled 1](https://user-images.githubusercontent.com/56623911/215532150-2a93bd95-8f4d-4066-95e4-98738573eef8.png)

ì œë„¤ë¦­ì„ ì“°ëŠ” í° íŠ¹ì§•ì€ ì»´íŒŒì¼ íƒ€ì„ë¶€í„° ëŸ°íƒ€ì„ê¹Œì§€ íƒ€ì… ì•ˆì •ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ ì“°ì¸ë‹¤.

í•˜ì§€ë§Œ ìœ„ì˜ ì½”ë“œëŠ” ëŸ°íƒ€ì„ì˜ íƒ€ì… ì•ˆì •ì„±ì´ ê¹¨ì§€ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì¤€ë‹¤.

ê·¸ëŸ¼ ì•ˆì „í•˜ê²Œ ì“°ëŠ” ë°©ë²•ì€ ??

---

## âœ…ì œë„¤ë¦­ varargs ë§¤ê°œë³€ìˆ˜ë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ

- ì•ˆì „í•˜ê²Œ ì“°ëŠ” ë°©ë²• ì˜ˆì œ

```java
public class FlattenWithVarages {

    @SafeVarargs // ê°€ë³€ì¸ìëŠ” ì•ˆì „í•˜ê²Œ ì‚¬ìš©ë˜ê³  ì‡ë‹¤ëŠ” ê²ƒì„ ì»´íŒŒì¼ì—ê²Œ ì•Œë ¤ì¤€ë‹¤. @SuppressWarningsì˜ êµ¬ì²´ì ì¸ ëŠë‚Œ
    //@SuppressWarnings("unchecked") // -> ì´ê±¸ ì“°ë©´ ë¬¸ì œëŠ” ë©”ì†Œë“œ ì „ì²´(ëª¨ë“  ì½”ë“œ)ê°€ SuppresWarningsì´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ë²”ìœ„ê°€ ë„“ìŒ
    static <T> List<T> flatten(List<? extends T>... lists) { //1
        List<T> result = new ArrayList<>(); //2
        for (List<? extends T> list : lists) //3
            result.addAll(list);
        return result; // 5

    }
    public static void main(String[] args) {
        List<Integer> flatList = flatten(List.of(1, 2), List.of(3, 4, 5), List.of(6, 7));
        System.out.println(flatList);

    }
}
```

ìë°” 7 ì „ì—ëŠ” ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë©”ì„œë“œì˜ ì‘ì„±ìê°€ í˜¸ì¶œì ìª½ì—ì„œ ë°œìƒí•˜ëŠ” ê²½ê³ ì— ëŒ€í•´ì„œ í•´ì¤„ ìˆ˜ ìˆëŠ” ì¼ì´ ì—†ë‹¤.

ì‚¬ìš©í•˜ê¸°ì— ì‹ ê²½ì´ ì“°ì¸ë‹¤.

ì‚¬ìš©ìëŠ” ì´ ê²½ê³ ë“¤ì„ ê·¸ëƒ¥ ë‘ê±°ë‚˜ (ë” í”í•˜ê²ŒëŠ”) í˜¸ì¶œí•˜ëŠ” ê³³ë§ˆë‹¤ @SuppressWarnings(â€uncheckedâ€) ì• ë„ˆí…Œì´ì…˜ì„ ë‹¬ì•„ ê²½ê³ ë¥¼ ìˆ¨ê²¨ì„œ ì‚¬ìš©í–ˆë‹¤.

ì´ëŸ° ê³¼ì •ì€ ì•ˆì¢‹ì€ ê²°ê³¼( ê°€ë…ì„± ë–¨ì–´ì§€ê³ , ì§„ì§œ ë¬¸ì œë¥¼ ì•Œë ¤ì£¼ëŠ” ê²½ê³ ë§ˆì € ìˆ¨ê¹€)ë¡œ ì´ì–´ì§„ë‹¤.

ìë°” 7ì—ì„œëŠ” `@SafeVarargs` ì• ë„ˆí…Œì´ì…˜ì´ ì¶”ê°€ë˜ì–´ ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë©”ì„œë“œ ì‘ì„±ìê°€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë°œìƒí•˜ëŠ” ê²½ê³ ë¥¼ ìˆ¨ê¸¸ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

> @SafeVarargs  - ë©”ì„œë“œ ì‘ì„±ìê°€ ê·¸ ë©”ì„œë“œê°€ íƒ€ì… ì•ˆì „í•¨ì„ ë³´ì¥í•˜ëŠ” ì¥ì¹˜
>

- @SafeVarargs ì‚¬ìš© ì‹œ ì£¼ì˜ ì‚¬í•­
  - ë©”ì„œë“œê°€ ì•ˆì „í•œ ê²Œ í™•ì‹¤í•˜ì§€ ì•Šìœ¼ë©´ ì ˆëŒ€ ì“°ì§€ë§ë¼!

---

ê·¸ë ‡ë‹¤ë©´ ë©”ì„œë“œê°€ ì•ˆì „í•œì§€ ì•ˆí•œì§€ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ?

- `ì¡°ê±´ 1.`
  - ê°€ë³€ì¸ìˆ˜ ë©”ì„œë“œëŠ” í˜¸ì¶œë  ë•Œ ë§ˆë‹¤ vararsg ë§¤ê°œë³€ìˆ˜ë¥¼ ë‹´ëŠ” ì œë„¤ë¦­ ë°°ì—´ì´ ë§Œë“¤ì–´ì§€ëŠ”ë°, ë©”ì„œë“œê°€ ì´ ë°°ì—´ì— ì•„ë¬´ê²ƒë„ ì €ì¥í•˜ì§€ ë§ì•„ì•¼í•œë‹¤.

- `ì¡°ê±´ 2.`
  - ë°°ì—´ì˜ ì°¸ì¡°ê°€ ë°–ìœ¼ë¡œ ë…¸ì¶œë˜ì§€ ì•Šì•„ì•¼ ëœë‹¤.

- ì˜ˆì œ ì½”ë“œë¥¼ í†µí•´ì„œ ì•Œì•„ë³´ì.

```java
public class PickTwo {

    //ì½”ë“œ 32-2 ìì‹ ì˜ ì œë„¤ë¦­ ë§¤ê°œë³€ìˆ˜ ë°°ì—´ì˜ ì°¸ì¡°ë¥¼ ë…¸ì¶œí•œë‹¤. -ì•ˆì „í•˜ì§€ ì•Šë‹¤(p.193)
    static <T> T[] toArray(T... args) { //1
        return args;
    }

    static <T> T[] pickTwo(T a, T b, T c) { // 2
        switch (ThreadLocalRandom.current().nextInt(3)) {
            case 0 : return toArray(a, b); //3
            case 1 : return toArray(a, b);
            case 2 : return toArray(a, b);
        }
        throw new AssertionError();
    }

    public static void main(String[] args) {
        String[] attributes = pickTwo("ì¢‹ì€", "ë¹ ë¥¸", "ì €ë ´í•œ"); // 4
        System.out.println(Arrays.toString(attributes)); // 5

    }
}
```

### ğŸ”¡ì½”ë“œë¥¼ ëœ¯ì–´ë³´ì.

1. ì œë„¤ë¦­ ë°°ì—´ì„ return í–ˆë‹¤. ì¦‰ ë°–ìœ¼ë¡œ ë…¸ì¶œí–ˆë‹¤.

```java
 static <T> T[] toArray(T... args) {
        return args; //ì œë„¤ë¦­ ë°°ì—´ì„ return args-> ë…¸ì¶œëœë‹¤.
    }
```

1. pickTwoë¥¼ í˜¸ì¶œí•˜ë©´ toArrayê°€ í˜¸ì¶œë˜ë©´ì„œ ì œë„¤ë¦­ ë°°ì—´(args)ì´ ë…¸ì¶œëœë‹¤. ì¦‰, pickTwoë¥¼ ì“°ëŠ” ê²ƒì´ toArrayë¥¼ ì“°ëŠ”ê²ƒê³¼ ë™ì¼í•˜ë‹¤.

```java
    static <T> T[] pickTwo(T a, T b, T c) { // 2
        switch (ThreadLocalRandom.current().nextInt(3)) {
            case 0 : return toArray(a, b);
            case 1 : return toArray(a, c);
            case 2 : return toArray(b, c);
        }
        throw new AssertionError();
    }
```

3. ì´ ë¶€ë¶„ì—ì„œ toArrayë¥¼ ì“¸ ë•Œ, ì»´íŒŒì¼ëŸ¬ëŠ” toArrayì˜ ë¦¬í„´íƒ€ì…ì„ Object[]ë¡œ íŒë‹¨í•œë‹¤.

ì´ìœ ëŠ” Objectê°€ ê°€ìƒ ì¶”ìƒì ì´ê¸° ë•Œë¬¸ì— ì–´ë–¤ íƒ€ì…ì´ ì˜¤ë”ë¼ë„ ë„£ì–´ ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

```java
return toArray(a, b);
```

1. ì´ ì½”ë“œ ì»´íŒŒì¼ íƒ€ì„ì—ì„œ  Object[]ì—ì„œ String[]ìœ¼ë¡œ ìºìŠ¤íŒ…í•œë‹¤.

```java
String[] attributes = pickTwo("ì¢‹ì€", "ë¹ ë¥¸", "ì €ë ´í•œ"); // 4
```

![Untitled 2](https://user-images.githubusercontent.com/56623911/215532175-fd2fa57b-4e80-4cf1-b260-4f464be8218a.png)

1. ê²°ê³¼ëŠ” ClassCastException ë‚˜ì˜¨ë‹¤.

ì´ìœ ëŠ” Object[] ì—ì„œ êµ¬ì²´ì ì¸ íƒ€ì…ì¸ String ìœ¼ë¡œëŠ” íƒ€ì… ìºìŠ¤íŒ…ì€ ë˜ì§ˆ ì•ŠëŠ”ë‹¤. (Runtime Exception)

```java
System.out.println(Arrays.toString(attributes)); // 5
```

ê²°ê³¼ì˜ ê·¼ë³¸ì ì¸ ë¬¸ì œë¥¼ ì‚´í´ë³´ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ë§Œë“  ë°°ì—´ì„ ë°–ìœ¼ë¡œ ë…¸ì¶œë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.

`ìì‹ ì˜ ì œë„¤ë¦­ ë§¤ê°œë³€ìˆ˜ ë°°ì—´ì˜ ì°¸ì¡°ë¥¼ ë…¸ì¶œí–ˆê¸° ë•Œë¬¸ì´ë‹¤.`

---

ê·¸ëŸ¼ ìœ„ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ì•ˆì „í•˜ê²Œ ì“¸ ìˆ˜ ìˆì„ê¹Œ ?

ê°„ë‹¨íˆ ë§í•˜ìë©´ ë°°ì—´ ëŒ€ì‹  ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ëœë‹¤.

ë°°ì—´ ëŒ€ì‹  ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“œëŠ”ë°©ë²• ìì„¸íˆ ë³´ë ¤ë©´  [item28](https://github.com/orgs/Study-2-Effective-Java/discussions/59)

- pickTwoë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•œ ì˜ˆì œ

```java
public class SafePickTwo {

    static <T> List<T> pickTwo(T a, T b, T c) {
        switch (ThreadLocalRandom.current().nextInt(3)) {
            case 0 : return List.of(a, b); // 1
            case 1 : return List.of(a, c);
            case 2 : return List.of(b, c);
        }
        throw new AssertionError();
    }

    public static void main(String[] args) {
        List<String> attributes = pickTwo("ì¢‹ì€", "ë¹ ë¥¸", "ì €ë ´í•œ");
        System.out.println(attributes);

    }
}
```

### ğŸ”¡ì½”ë“œë¥¼ ëœ¯ì–´ë³´ì

1. ì›ë˜ ì½”ë“œ(pickTwo) ê°€ë³€ì¸ìˆ˜(Tâ€¦) ëŒ€ì‹ ì— List.ofë¥¼ ì‚¬ìš©í•˜ë©´ëœë‹¤.

```java
List.of(a, b);
List.of(a, c);
List.of(b, c);
```

Listë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ì•ˆì •ì„±ì´ ë³´ì¥ì´ëœë‹¤.

- Flattenë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•œ ì˜ˆì œ

```java
public class FlattenWithList {

    static <T> List<T> flatten(List<List<? extends T>> lists) { // 1
        List<T> result = new ArrayList<>();
        for (List<? extends T> list : lists)
            result.addAll(list);
        return result;
    }

    public static void main(String[] args) {
        List<Integer> flatList = flatten(List.of(List.of(1, 2), List.of(3, 4, 5), List.of(6, 7)));
        System.out.println(flatList);

    }
}
```

### ğŸ”¡ì½”ë“œë¥¼ ëœ¯ì–´ë³´ì

1. ì›ë˜ ì½”ë“œ(FlattenWithVarages) ì—ì„œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ë•Œ

```java
List<? extends T>... -->  List<List<? extends T>>
```



<!-- outline-end -->
