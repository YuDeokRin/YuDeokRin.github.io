---
# multilingual page pair id, this must pair with translations of this page. (This name must be unique)
# lng_pair: id_autogeneratedsamplecontent_1
title: MyBatisì˜ Result Maps

# post specific
# if not specified, .name will be used from _data/owner.yml
#author: "Dante"
# multiple category is not supported
category: auto generated
# multiple tag entries are possible
tags: [Mybatis, SQLMapper]
# thumbnail image for post
img: ":mybatis.jpg"
# disable comments on this page
comments_disable: true

# publish date
date: 2023-05-15 22:55:00 +0900

# seo
# if not specified, date will be used.
#meta_modify_date: 2023-05-15 22:55:00 +0900
# check the meta_common_description in _data/lang/[language].yml
#meta_description: ""

# optional
# if you enabled image_viewer_posts you don't need to enable this. This is only if image_viewer_posts = false
#image_viewer_on: true
# if you enabled image_lazy_loader_posts you don't need to enable this. This is only if image_lazy_loader_posts = false
#image_lazy_loader_on: true
# exclude from on site search
#on_site_search_exclude: true
# exclude from search engines
#search_engine_exclude: true
# to disable this page, simply set published: false or delete this file
#published: false
---
{%- comment -%} Please delete below and place your page content here {%- endcomment -%}

{%- include util/auto-content-generator.liquid -%}

<!-- outline-start -->

# Result Maps

## ğŸ‘‰resultMapì´ë€?

resultMapì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì‘ì„±ë˜ëŠ” JDBCì½”ë“œë¥¼ ëŒ€ë¶€ë¶„ ì¤„ì—¬ì£¼ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.

JOIN ë§¤í•‘ê³¼ ê°™ì€ ë³µì¡í•œ ì½”ë“œëŠ” ë§ì€ ì–‘ì˜ ì½”ë“œê°€ í•„ìš”í•˜ë‹¤.

í•˜ì§€ë§Œ resultMapì€ ê°„ë‹¨í•œ êµ¬ë¬¸ì—ì„œëŠ” ë§¤í•‘ì´ í•„ìš”í•˜ì§€ ì•Šê³  ë³µì¡í•œ êµ¬ë¬¸ì—ì„œ ê´€ê³„ë¥¼ ì„œìˆ í•˜ê¸° ìœ„í•´ í•„ìš”í•˜ë‹¤.

---

### ğŸ‘‰DBì˜ ì¹¼ëŸ¼ëª…ê³¼ í”„ë¡œí¼í‹°ëª…ì´ ê°™ì„ ê²½ìš°

- resultMapì„ ì“°ì§€ì•Šì€ ì˜ˆì œ

```sql
<select id="selectUsers" resultType="map">
  select id, username, hashedPassword
  from some_table
  where id = #{id}
</select>
```

- JavaBean ì˜ˆì œ
  - property : id, username, hashedPassword

```java
package com.someapp.model;
public class User {
  private int id;
  private String username;
  private String hashedPassword;

  public int getId() {
    return id;
  }
  public void setId(int id) {
    this.id = id;
  }
  public String getUsername() {
    return username;
  }
  public void setUsername(String username) {
    this.username = username;
  }
  public String getHashedPassword() {
    return hashedPassword;
  }
  public void setHashedPassword(String hashedPassword) {
    this.hashedPassword = hashedPassword;
  }
}
```

- ìœ„ì˜ ì¿¼ë¦¬(select)ì— ì¹¼ëŸ¼ëª…ì´ ì •í™•íˆ ì¼ì¹˜í•œë‹¤. â†’ ë”°ë¼ì„œ ìë°”ë¹ˆì€ HashMapê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë§¤ìš° ì‰½ê²Œ ResultMapì— ë§¤í•‘ë  ìˆ˜ ìˆë‹¤.

```sql
<select id="selectUsers" resultType="com.someapp.model.User">
  select id, username, hashedPassword
  from some_table
  where id = #{id}
</select>
```

---

## ğŸ‘‰DBì˜ ì¹¼ëŸ¼ëª…ê³¼ í”„ë¡œí¼í‹°ëª…ì´ ê°™ì§€ ì•Šì„ ê²½ìš°

1. ì¹¼ëŸ¼ëª…ê³¼ í”„ë¡œí¼í‹°ëª…ì´ ë‹¤ë¥´ë‹¤ë©´ SQLêµ¬ë¬¸ì— ë³„ì¹­ì„ ì§€ì •í•œë‹¤.

```sql
<select id="selectUsers" resultType="User">
  select
    user_id             as "id",
    user_name           as "userName",
    hashed_password     as "hashedPassword"
  from some_table
  where id = #{id}
</select>
```

1. resultMapì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

```xml
<resultMap id="userResultMap" type="User">
  <id property="id" column="user_id" />
  <result property="username" column="user_name"/>
  <result property="password" column="hashed_password"/>
</resultMap>
```

- <resultMap id="userResultMap" type="User">
    - id : `userResultMap`
    - type : `User.java`

- `resultMap="userResultMap"` ìœ¼ë¡œ ì°¸ì¡°í•œë‹¤.

```sql
<select id="selectUsers" resultMap="userResultMap">
  select user_id, user_name, hashed_password
  from some_table
  where id = #{id}
</select>
```

---

## ğŸ‘‰ë³µì¡í•œ ê²°ê³¼ë§¤í•‘

```sql
<!-- ë§¤ìš° ë³µì¡í•œ êµ¬ë¬¸ -->
<select id="selectBlogDetails" resultMap="detailedBlogResultMap">
  select
       B.id as blog_id,
       B.title as blog_title,
       B.author_id as blog_author_id,
       A.id as author_id,
       A.username as author_username,
       A.password as author_password,
       A.email as author_email,
       A.bio as author_bio,
       A.favourite_section as author_favourite_section,
       P.id as post_id,
       P.blog_id as post_blog_id,
       P.author_id as post_author_id,
       P.created_on as post_created_on,
       P.section as post_section,
       P.subject as post_subject,
       P.draft as draft,
       P.body as post_body,
       C.id as comment_id,
       C.post_id as comment_post_id,
       C.name as comment_name,
       C.comment as comment_text,
       T.id as tag_id,
       T.name as tag_name
  from Blog B
       left outer join Author A on B.author_id = A.id
       left outer join Post P on B.id = P.blog_id
       left outer join Comment C on P.id = C.post_id
       left outer join Post_Tag PT on PT.post_id = P.id
       left outer join Tag T on PT.tag_id = T.id
  where B.id = #{id}
</select>
```

- ResultMap ì˜ˆì œ

```sql
<!-- Very Complex Result Map -->
<resultMap id="detailedBlogResultMap" type="Blog">
  <constructor>
    <idArg column="blog_id" javaType="int"/>
  </constructor>
  <result property="title" column="blog_title"/>
  <association property="author" javaType="Author">
    <id property="id" column="author_id"/>
    <result property="username" column="author_username"/>
    <result property="password" column="author_password"/>
    <result property="email" column="author_email"/>
    <result property="bio" column="author_bio"/>
    <result property="favouriteSection" column="author_favourite_section"/>
  </association>
  <collection property="posts" ofType="Post">
    <id property="id" column="post_id"/>
    <result property="subject" column="post_subject"/>
    <association property="author" javaType="Author"/>
    <collection property="comments" ofType="Comment">
      <id property="id" column="comment_id"/>
    </collection>
    <collection property="tags" ofType="Tag" >
      <id property="id" column="tag_id"/>
    </collection>
    <discriminator javaType="int" column="draft">
      <case value="1" resultType="DraftPost"/>
    </discriminator>
  </collection>
</resultMap>
```

- resultMap
  - `constructor` - ì¸ìŠ¤í„´ìŠ¤í™”ë˜ëŠ” í´ë˜ìŠ¤ì˜ ìƒì„±ìì— ê²°ê³¼ë¥¼ ì‚½ì…í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
    - `idArg` - IDì¸ì. IDì™€ ê°™ì€ ê²°ê³¼ëŠ” ì „ë°˜ì ìœ¼ë¡œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¨ë‹¤.
    - `arg` - ìƒì„±ìì— ì‚½ì…ë˜ëŠ” ì¼ë°˜ì ì¸ ê²°ê³¼
  - `result` - í•„ë“œë‚˜ ìë°”ë¹ˆ í”„ë¡œí¼í‹°ì— ì‚½ì…ë˜ëŠ” ì¼ë°˜ì ì¸ ê²°ê³¼
  - `association` - ë³µì¡í•© íƒ€ì…ì˜ ì—°ê´€ê´€ê³„. ë§ì€ ê²°ê³¼ëŠ” íƒ€ì…ìœ¼ë¡œ ë‚˜íƒ€ë‚œë‹¤.
    - ì¤‘ì²©ëœ ê²°ê³¼ ë§¤í•‘ - resultMap ìŠ¤ìŠ¤ë¡œì˜ ì—°ê´€ê´€ê³„
  - `collection` - ë³µì¡í•œ íƒ€ì…ì˜ ì»¬ë ‰ì…˜
    - ì¤‘ì²©ëœ ê²°ê³¼ ë§¤í•‘ - resultMap ìŠ¤ìŠ¤ë¡œì˜ ì—°ê´€ê´€ê³„
  - `discriminator` - ì‚¬ìš©í•  resultMapì„ íŒë‹¨í•˜ê¸° ìœ„í•œ ê²°ê³¼ê°’ì„ ì‚¬ìš©
    - case - ëª‡ ê°€ì§€ ê°’ì— ê¸°ì´ˆí•œ ê²°ê³¼ ë§¤í•‘
      - ì¤‘ì²©í•œ ê²°ê³¼ ë§¤í•‘ - ì´ ê²½ìš° ë˜í•œ ê²°ê³¼ë§¤í•‘ ìì²´ì´ê³  ì´ëŸ¬í•œ ë™ì¼í•œ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë§ì´ í¬í•¨í•˜ê±°ë‚˜ ì™¸ë¶€resultMapì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.


    | ì†ì„± | ì„¤ëª… |
    | --- | --- |
    | id | ê²°ê³¼ë§¤í•‘ì„ ì°¸ì¡°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê°’ìœ¼ë¡œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ìœ ì¼í•œ ì‹ë³„ì |
    | type | íŒ¨í‚¤ì§€ë¥¼ í¬í•¨í•œ ìë°” í´ë˜ìŠ¤ëª…ì´ë‚˜ íƒ€ì…ë³„ì¹­ |
    | autoMapping | ì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ë©´ MybatisëŠ” ê²°ê³¼ë§¤í•‘ì„ ìë™ë§¤í•‘ìœ¼ë¡œ ì²˜ë¦¬í• ì§€ ë§ì§€ë¥¼ ì²˜ë¦¬í•œë‹¤. ì´ ì†ì„±ì€ autoMappingBehaviorë¼ëŠ” ì „ì—­ì„¤ì •ì„ ë®ëŠ”ë‹¤.  ë””í´íŠ¸ëŠ” unsetì´ë‹¤. |

### ğŸ‘‰id, result

```xml
<id property="id" column="post_id"/>
<result property="subject" column="post_subject"/>
```

- idì™€ result ëª¨ë‘ í•œ ê°œì˜ ì»¬ëŸ¼ì„ í•œê°œì˜ í”„ë¡œí¼í‹°ë‚˜ ê°„ë‹¨í•œ ë°ì´í„° íƒ€ì…ì˜ í•„ë“œì— ë§¤í•‘í•œë‹¤.

- idì™€ resultì˜ ì°¨ì´ì 
  - idê°’ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¹„êµí•  ë•Œ ì‚¬ìš©ë˜ëŠ” êµ¬ë¶„ì í”„ë¡œí¼í‹°ë¡œ ì²˜ë¦¬ë˜ëŠ” ì ì´ ì°¨ì´ì ì´ë‹¤. ì´ ë¶€ë¶„ì€ ì¼ë°˜ì ìœ¼ë¡œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ì§€ë§Œ íŠ¹íˆ ìºì‹œì™€ ë‚´í¬ëœ(nested)ê²°ê³¼ ë§¤í•‘(ì¡°ì¸ ë§¤í•‘)ì˜ ê²½ìš°ì— ë” ê·¸ë ‡ë‹¤.

- idì™€ result ì—˜ë¦¬ë¨¼íŠ¸ ì†ì„±

| ì†ì„± | ì„¤ëª… |
| --- | --- |
| property | ê²°ê³¼ ì»¬ëŸ¼ì— ë§¤í•‘í•˜ê¸° ìœ„í•œ í•„ë“œë‚˜ í”„ë¡œí¼í‹°. ìë°”ë¹ˆ í”„ë¡œí¼í‹°ê°€ í•´ë‹¹ ì´ë¦„ê³¼ ì¼ì¹˜í•œë‹¤ë©´ ê·¸ í”„ë¡œí¼í‹°ê°€ ì‚¬ìš©ë  ê²ƒì´ë‹¤. ë°˜ë©´ì— MyBatisëŠ” í•´ë‹¹ ì´ë¦„ì´ í•„ë“œë¥¼ ì°¾ì„ ê²ƒì´ë‹¤. ì (.) í‘œê¸°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³µì¡í•œ ë§¤í”„ë¡œí¼í‹° ê²€ìƒ‰ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì˜ˆ) â€œusernameâ€ê³¼ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ë§¤í•‘ë  ìˆ˜ ìˆê±°ë‚˜ â€œaddress.street.numberâ€ì²˜ëŸ¼ ë³µì¡í•˜ê²Œ ë§¤í•‘ë  ìˆ˜ë„ ìˆë‹¤.   |
| column |  |
| javaType |  |
| jdbcType |  |
| typeHadnler |  |

---

## ğŸ”—ì°¸ì¡°

[MyBatis â€“ ë§ˆì´ë°”í‹°ìŠ¤ 3 | ë§¤í¼ XML íŒŒì¼](https://mybatis.org/mybatis-3/ko/sqlmap-xml.html#result-maps)

<!-- outline-end -->
